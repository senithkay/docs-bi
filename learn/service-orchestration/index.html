
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta name="robots" content="noindex, nofollow">
      
        <meta name="description" content="Documentation for Kola Integrator">
      
      
        <meta name="author" content="WSO2">
      
      
      
        <link rel="prev" href="../message-routing/">
      
      
        <link rel="next" href="../integration-ai/">
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>Service orchestration - Kola Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<!-- Added the font from google fonts -->
<link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/lib/highlightjs/styles/vs.min.css">
    
      <link rel="stylesheet" href="../../assets/css/blue-palette-alt1.css">
    
      <link rel="stylesheet" href="../../assets/css/mitheme.css">
    
      <link rel="stylesheet" href="../../assets/css/custom.css">
    
      <link rel="stylesheet" href="../../assets/lib/json-formatter/json-formatter.css">
    
      <link rel="stylesheet" href="../../assets/css/config-catalog.css">
    
      <link rel="stylesheet" href="../../assets/lib/fontawesome-free-6.3.0-web/css/all.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#service-orchestration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
This documentation is a work in progress.

          </div>
          
        </aside>
      
    </div>
    
    
      <!--
 * Copyright (c) 2024, WSO2 LLC. (http://www.wso2.com) All Rights Reserved.
 *
 * WSO2 LLC. licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
-->





<header class="md-header md-header--shadow md-header--lifted" data-md-component="header" id="page-header" data-url="" data-lang="en">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Kola Documentation"
       class="md-header__button md-logo" aria-label="Kola Documentation" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kola Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Service orchestration
            
          </span>
        </div>
      </div>
    </div>
    
    <form class="md-header__option" data-md-component="palette">
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme)"
             data-md-color-scheme="default"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to dark mode"  type="radio" name="__palette"
             id="__palette_1">
      
      <label class="md-header__button md-icon" title="Switch to dark mode"
             for="__palette_3" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg>
      </label>
      
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme: light)"
             data-md-color-scheme="default"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to system preference"  type="radio" name="__palette"
             id="__palette_2">
      
      <label class="md-header__button md-icon" title="Switch to system preference"
             for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
      
      
      
      <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)"
             data-md-color-scheme="slate"
             data-md-color-primary=""
             data-md-color-accent="" 
             aria-label="Switch to light mode"  type="radio" name="__palette"
             id="__palette_3">
      
      <label class="md-header__button md-icon" title="Switch to light mode"
             for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
      
      
    </form>
    
    
    
    <label class="md-header__button md-icon" for="__search">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
    </label>
    <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
    <div class="md-header__source">
      <a href="https://github.com/wso2/docs-ballerina-integrator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wso2/docs-ballerina-integrator
  </div>
</a>
    </div>
    
  </nav>
  
  
  
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../get-started/quick-start-guide/" class="md-tabs__link">
        Get started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../message-transformation/" class="md-tabs__link md-tabs__link--active">
        Learn
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../build/jar/" class="md-tabs__link">
        Build
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../roadmap/language-support/" class="md-tabs__link">
        Roadmap
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
  
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Kola Documentation" class="md-nav__button md-logo" aria-label="Kola Documentation" data-md-component="logo">
      
  <img src="../../images/logo.svg" alt="logo">

    </a>
    Kola Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/wso2/docs-ballerina-integrator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wso2/docs-ballerina-integrator
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Get started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Get started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/quick-start-guide/" class="md-nav__link">
        Quick start guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/key-concepts/" class="md-nav__link">
        Key concepts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Learn
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Learn
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../message-transformation/" class="md-nav__link">
        Message transformation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../message-routing/" class="md-nav__link">
        Message routing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Service orchestration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Service orchestration
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-new-integration-project" class="md-nav__link">
    Step 1: Create a new integration project.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-a-http-service" class="md-nav__link">
    Step 2: Create a HTTP service.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-define-types" class="md-nav__link">
    Step 3: Define types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-add-connectors" class="md-nav__link">
    Step 4: Add connectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-design-the-resource" class="md-nav__link">
    Step 5: Design the resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-implement-the-orchestration-logic" class="md-nav__link">
    Step 6: Implement the orchestration logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-run-the-service" class="md-nav__link">
    Step 7: Run the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../integration-ai/" class="md-nav__link">
        AI-assisted integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-mapping/" class="md-nav__link">
        Data Mapping
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Build
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Build
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../build/jar/" class="md-nav__link">
        Build an executable JAR
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../build/docker/" class="md-nav__link">
        Build a Docker image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Roadmap
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Roadmap
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/language-support/" class="md-nav__link">
        Language feature support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation" class="md-nav__link">
    Implementation
  </a>
  
    <nav class="md-nav" aria-label="Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-create-a-new-integration-project" class="md-nav__link">
    Step 1: Create a new integration project.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-create-a-http-service" class="md-nav__link">
    Step 2: Create a HTTP service.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-define-types" class="md-nav__link">
    Step 3: Define types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-add-connectors" class="md-nav__link">
    Step 4: Add connectors
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-design-the-resource" class="md-nav__link">
    Step 5: Design the resource
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-implement-the-orchestration-logic" class="md-nav__link">
    Step 6: Implement the orchestration logic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-run-the-service" class="md-nav__link">
    Step 7: Run the service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/wso2/docs-ballerina-integrator/edit/main/en/docs/learn/service-orchestration.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/wso2/docs-ballerina-integrator/raw/main/en/docs/learn/service-orchestration.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="service-orchestration">Service orchestration<a class="headerlink" href="#service-orchestration" title="Permanent link">&para;</a></h1>
<p>In this tutorial, you’ll create a service to process appointment requests for hospitals. The service will call multiple backend services sequentially, using data from each call to inform the next. This approach integrates several services into one, known as service orchestration.
To implement this, you’ll build a REST service with a single resource in Kola extension and then run the service. The resource will receive user requests, make the necessary backend calls, and respond with the appointment details.</p>
<p>The flow is as follows.</p>
<ol>
<li>The user sends an appointment request to the service.
    <div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;patient&quot;</span><span class="p">:{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="s2">&quot;johndoe@gmail.com&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;cardNo&quot;</span><span class="p">:</span><span class="s2">&quot;7844481124110331&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hospital_id&quot;</span><span class="p">:</span><span class="s2">&quot;grandoaks&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;appointment_date&quot;</span><span class="p">:</span><span class="s2">&quot;2024-11-06&quot;</span>
<span class="w">   </span><span class="p">}</span>
</code></pre></div></li>
<li>Extract necessary details from the request (e.g., hospital, patient, doctor, etc.) and make a call to the hospital backend service to request an appointment. A response similar to the following will be returned from the hospital backend service on success. 
    <div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;appointmentNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;surgery&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;availability&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9.00 a.m - 11.00 a.m&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;fee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7000</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;confirmed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;appointmentDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></li>
<li>Use the hospital ID and the appointment number and call the hospital backend service to retrieve the fee for the appointment. The response will be similar to the following.
    <div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;patientName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;doctorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;actualFee&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;7000&quot;</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div></li>
<li>Finally, call the payment backend service to make the payment and retrieve the reservation status.
   <div class="highlight"><pre><span></span><code><span class="w">  </span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;appointmentNo&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;doctorName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;actualFee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7000</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;discount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;discounted&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">5600.0</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;paymentID&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f130e2ed-a34e-4434-9b40-6a0a8054ee6b&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;settled&quot;</span>
<span class="w"> </span><span class="p">}</span>
</code></pre></div></li>
</ol>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ol>
<li>Download the JAR file for the <a href="https://github.com/ballerina-guides/integration-tutorials/blob/main/backends/hospital-service/hospitalservice.jar">backend service</a> and execute the following command to start the service.</li>
<li>Install the latest <a href="https://ballerina.io/downloads/">Ballerina Swan Lake</a> version.</li>
</ol>
<h2 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">&para;</a></h2>
<p>Follow the steps below to implement the service orchestration.</p>
<h3 id="step-1-create-a-new-integration-project">Step 1: Create a new integration project.<a class="headerlink" href="#step-1-create-a-new-integration-project" title="Permanent link">&para;</a></h3>
<ol>
<li>Click on the Kola Integrator icon on the sidebar.</li>
<li>Click on the <strong><code>Create New Integration</code></strong> button.</li>
<li>Enter the project name as <code>ServiceOrchestration</code>.</li>
<li>Select project directory location by clicking on the <strong><code>Select Location</code></strong> button.</li>
<li>Click on the <strong><code>Create New Integration</code></strong> button to create the integration project.
    <a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/create-integration.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/create-integration.png" alt="Create Integration" width="70%"></a></li>
</ol>
<h3 id="step-2-create-a-http-service">Step 2: Create a HTTP service.<a class="headerlink" href="#step-2-create-a-http-service" title="Permanent link">&para;</a></h3>
<ol>
<li>In the design view, click on the <strong><code>Add Construct</code></strong> button.</li>
<li>Select <strong><code>Service</code></strong> from the menu.</li>
<li>Select <strong><code>HTTP Service</code></strong> from the Service Type dropdown.</li>
<li>Select <strong><code>Design From Scratch</code></strong> option.</li>
<li>Enter the service name as <code>HealthCare</code>, path as <code>/healthcare</code>, and <code>8290</code> as the port.</li>
<li>Click on the <strong><code>Add Service</code></strong> button.</li>
</ol>
<h3 id="step-3-define-types">Step 3: Define types<a class="headerlink" href="#step-3-define-types" title="Permanent link">&para;</a></h3>
<ol>
<li>Click on the <strong><code>Add Construct</code></strong> button and select <strong><code>Type</code></strong>.</li>
<li>Select <strong><code>Import a JSON</code></strong> from the Type dropdown.</li>
<li>Generate record types corresponding to the response from the hospital backend service by providing a sample of the expected JSON payload.
    <div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;appointmentNumber&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;doctor&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;surgery&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;availability&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;9.00 a.m - 11.00 a.m&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;fee&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">7000.0</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;dob&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1940-03-19&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;ssn&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;234-23-525&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;California&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;phone&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8770586755&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;johndoe@gmail.com&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;hospital&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;grand oak community hospital&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;confirmed&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;appointmentDate&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-10-02&quot;</span>
<span class="p">}</span>
</code></pre></div></li>
<li>Click on the <strong><code>Create Type</code></strong> button to create the new type with the specified configurations.
   <a href="https://wso2.github.io/docs-kola/assets/img/message-routing/types.png"><img src="https://wso2.github.io/docs-kola/assets/img/message-routing/types.png" alt="Create Type" width="70%"></a></li>
</ol>
<h3 id="step-4-add-connectors">Step 4: Add connectors<a class="headerlink" href="#step-4-add-connectors" title="Permanent link">&para;</a></h3>
<ol>
<li>Navigate to design view and click on the <strong><code>Add Connector</code></strong> button.</li>
<li>Search and select the <strong><code>HTTP</code></strong> connector.</li>
<li>Enter the connector name as <code>hospitalServicesEP</code>, URL as <code>http://localhost:9090</code>, and config as <code>{}</code>.
<a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/add-connector.gif"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/add-connector.gif" alt="Add Connector" width="70%"></a></li>
<li>Add another connector for the payment backend service with the URL <code>http://localhost:9090/healthcare/payments</code> and the name <code>paymentEP</code>, and config as <code>{}</code>.  <br />
<a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/connectors.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/connectors.png" alt="Connectors" width="70%"></a></li>
</ol>
<details class="info" open="open"><summary>HTTP Connector</summary><p>To learn more about HTTP client, see <a href="https://ballerina.io/learn/by-example/http-client-send-request-receive-response/">Ballerina HTTP Client</a>.
See supported client configurations in the <a href="https://central.ballerina.io/ballerina/http/2.12.2#ClientConfiguration">HTTP Client Configurations</a>.</p>
</details>
<h3 id="step-5-design-the-resource">Step 5: Design the resource<a class="headerlink" href="#step-5-design-the-resource" title="Permanent link">&para;</a></h3>
<ol>
<li>The service will be generated with a default resource named <code>greeting</code>. Click on the service to view and update the resource details.</li>
<li>Click on three dots that appear in front of the <code>greeting</code> resource and select edit to view and update the resource details.</li>
<li>Define an HTTP resource that allows the <strong><code>POST</code></strong> operation on the resource path <code>categories/[string category]/reserve</code> and accepts the category path parameter (corresponding to the specialization). </li>
<li>Add <strong><code>ReservationRequest</code></strong> as a parameter indicating that the resource expects a <code>JSON</code> object corresponding to <strong><code>ReservationRequest</code></strong> as the payload. </li>
<li>Add <code>ReservationStatus</code>, <code>http:NotFound</code>, and <code>http:InternalServerError</code> as the response types.
   <a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/resource.gif"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/resource.gif" alt="Resource" width="70%"></a></li>
<li>Click on the <strong><code>Save</code></strong> button to save the resource. <br />
   <a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/resource-edit.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/resource-edit.png" alt="Resource" width="70%"></a></li>
</ol>
<h3 id="step-6-implement-the-orchestration-logic">Step 6: Implement the orchestration logic<a class="headerlink" href="#step-6-implement-the-orchestration-logic" title="Permanent link">&para;</a></h3>
<ol>
<li>Click on the <code>categories/[string category]/reserve</code> resource to navigate to the resource implementation designer view.</li>
<li>Hover to the arrow after start and click the ➕ button to add a new action to the resource.</li>
<li>Select <strong><code>Variable</code></strong> from the node panel on the left. This variable will be used to store the request payload for the hospital service.</li>
<li>Change the variable name to <code>hospitalRequset</code>, type as <code>json</code> and expression:
    <div class="highlight"><pre><span></span><code>     {
     patient:{
         name: reservation.patient.name,
         dob: reservation.patient.dob,
         ssn: reservation.patient.ssn,
         address: reservation.patient.address,
         phone: reservation.patient.phone,
         email: reservation.patient.email
      }
     doctor: reservation.doctor,
     hospital: reservation.hospital,
     appointment_date: reservation.appointment_date
    }
</code></pre></div></li>
<li>Click on the <strong><code>Save</code></strong> button to add the variable. <br />
<a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/variable.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/variable.png" alt="Variable" width="70%"></a></li>
<li>Click ➕ sign and select <strong><code>hospitalServicesEP</code></strong> connector from the node panel.</li>
<li>
<p>Select <strong><code>post</code></strong> from the dropdown. Then, fill in the required fields with the values given below and click <strong><code>Save</code></strong>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>appointment</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>Appointment</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>"/[payload.hospital_id]/categories/" + category + "/reserve"</code></td>
</tr>
<tr>
<td>message</td>
<td><code>hospitalRequset</code></td>
</tr>
</tbody>
</table>
</li>
</ol>
<p><a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/post-request.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/post-request.png" alt="Hospital Service Request" width="70%"></a> <br />
8. Click on the ➕ sign and select <strong><code>Variable</code></strong> from the node panel. Add a variable named <code>appointmentNumber</code> with the type <strong><code>int</code></strong> and expression <code>appointment.appointmentNumber</code>.<br />
<a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/appointment.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/appointment.png" alt="Appointment Number" width="70%"></a> <br />
9. Let's add another connector to get the fee for the appointment. Click on the ➕ sign and select <strong><code>hospitalServicesEP</code></strong> connector from the node panel.<br />
10. Select <strong><code>get</code></strong> from the dropdown. Then, fill in the required fields with the values given below and click <strong><code>Save</code></strong>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>fee</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>Fee</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>/[reservation.hospital_id]/categories/appointments/[appointmentNumber]/fee</code></td>
</tr>
</tbody>
</table>
<p><a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/fee.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/fee.png" alt="Hospital Service Request" width="70%"></a><br />
11. Click on the ➕ sign and select <strong><code>Variable</code></strong> from the node panel. Add a variable named <code>actualFee</code> with the type <strong><code>decimal</code></strong> and expression <code>decimal:fromString(fee.actualFee)</code>.
12. Create another new to prepare the payment request. Click on the ➕ sign and select <strong><code>Variable</code></strong> from the node panel. Add a variable named <code>paymentRequest</code> with the type <strong><code>json</code></strong> and expression as follows.
    <div class="highlight"><pre><span></span><code>{
    appointmentNumber: appointmentNumber,
    doctor: appointment.doctor.toJson(),
    patient: appointment.patient.toJson(),
    fee: actualFee,
    confirmed: false,
    card_number: reservation.patient.cardNo
}
</code></pre></div>
   <a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/payment-request.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/payment-request.png" alt="Payment Request" width="70%"></a><br />
13. Let's add another connector action to make the payment. Click on the ➕ sign and select <strong><code>paymentEP</code></strong> connector from the node panel. <br />
14. Select <strong><code>post</code></strong> from the dropdown. Then, fill in the required fields with the values given below and click <strong><code>Save</code></strong>.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable Name</td>
<td><code>status</code></td>
</tr>
<tr>
<td>Variable Type</td>
<td><code>ReservationStatus</code></td>
</tr>
<tr>
<td>Resource Path</td>
<td><code>"/"</code></td>
</tr>
<tr>
<td>message</td>
<td><code>paymentRequest</code></td>
</tr>
</tbody>
</table>
<p><a href="https://wso2.github.io/docs-kola/assets/img/service-orchestration/payment.png"><img src="https://wso2.github.io/docs-kola/assets/img/service-orchestration/payment.png" alt="Payment" width="70%"></a><br />
15. Click on the ➕ sign and select <strong><code>Return</code></strong> from the node panel. Add the <code>status</code> variable to the return node.</p>
<h3 id="step-7-run-the-service">Step 7: Run the service<a class="headerlink" href="#step-7-run-the-service" title="Permanent link">&para;</a></h3>
<ol>
<li>Click on the <strong><code>Run</code></strong> button to start the service.</li>
<li>Start the backend service by executing the following command.
    <div class="highlight"><pre><span></span><code>$<span class="w"> </span>bal<span class="w"> </span>run<span class="w"> </span>hospitalservice.jar
</code></pre></div></li>
<li>Click on the <strong><code>Run</code></strong>  on the run button (▶️) in the top right corner to run the service.</li>
<li>The service will start and the service will be available at <code>http://localhost:8290/healthcare/categories/[category]/reserve</code>.</li>
<li>Use a tool like <a href="https://www.postman.com/">Postman</a> to send a POST request to the service with the following payload.
   <div class="highlight"><pre><span></span><code><span class="w"> </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8290/healthcare/categories/surgery/reserve&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1"> &quot;patient&quot;: {</span>
<span class="s1">   &quot;name&quot;: &quot;John Doe&quot;,</span>
<span class="s1">   &quot;dob&quot;: &quot;1940-03-19&quot;,</span>
<span class="s1">   &quot;ssn&quot;: &quot;234-23-525&quot;,</span>
<span class="s1">   &quot;address&quot;: &quot;California&quot;,</span>
<span class="s1">   &quot;phone&quot;: &quot;8770586755&quot;,</span>
<span class="s1">   &quot;email&quot;: &quot;johndoe@gmail.com&quot;,</span>
<span class="s1">   &quot;cardNo&quot;: &quot;7844481124110331&quot;</span>
<span class="s1">  },</span>
<span class="s1">  &quot;doctor&quot;: &quot;thomas collins&quot;,</span>
<span class="s1">  &quot;hospital_id&quot;: &quot;grandoak&quot;,</span>
<span class="s1">  &quot;hospital&quot;: &quot;grand oak community hospital&quot;,</span>
<span class="s1">  &quot;appointment_date&quot;: &quot;2023-10-02&quot;</span>
<span class="s1"> }&#39;</span>
</code></pre></div></li>
<li>The response will be similar to the following.
   <div class="highlight"><pre><span></span><code><span class="w"> </span><span class="p">{</span><span class="nt">&quot;appointmentNo&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;doctorName&quot;</span><span class="p">:</span><span class="s2">&quot;thomas collins&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;patient&quot;</span><span class="p">:</span><span class="s2">&quot;John Doe&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;actualFee&quot;</span><span class="p">:</span><span class="mf">7000.0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;discount&quot;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;discounted&quot;</span><span class="p">:</span><span class="mf">5600.0</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;paymentID&quot;</span><span class="p">:</span><span class="s2">&quot;e560ea82-1c42-4972-a471-af5c1ad4995f&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;settled&quot;</span><span class="p">}</span><span class="err">%</span>
</code></pre></div></li>
</ol>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
      
        <footer class="md-footer">
  
  
  <nav class="md-footer__inner md-grid" aria-label="Footer" >
    
    
    <a href="../message-routing/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Message routing" rel="prev">
      <div class="md-footer__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </div>
      <div class="md-footer__title">
        <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Previous
                </span>
          Message routing
        </div>
      </div>
    </a>
    
    
    
    <a href="../integration-ai/" class="md-footer__link md-footer__link--next" aria-label="Next: AI-assisted integration" rel="next">
      <div class="md-footer__title">
        <div class="md-ellipsis">
                <span class="md-footer__direction">
                  Next
                </span>
          AI-assisted integration
        </div>
      </div>
      <div class="md-footer__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
      </div>
    </a>
    
  </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  <div class="footer-copyright-left">
  
    <div class="md-copyright__highlight">
      WSO2 Kola - Documentation
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
  </div>
  <div class="footer-copyright-right">
    <div class="footer-copyright-top">
      Copyright &copy; <a href="https://wso2.com/">WSO2</a> LLC (2024)
    </div>
    <div class="footer-copyright-bottom">
      Content licensed under <a href="https://creativecommons.org/licenses/by/4.0">CC By 4.0.</a> | Sample code
      licensed under <a href="http://www.apache.org/licenses/">Apache 2.0</a>.
    </div>
  </div>
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.tabs", "navigation.tabs.sticky", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../../assets/lib/highlightjs/highlight.min.js"></script>
      
        <script src="../../assets/lib/json-formatter/json-formatter.umd.js"></script>
      
        <script src="../../assets/js/mitheme.js"></script>
      
    
  </body>
</html>